# 0.4 – Configure Vercel Deployment

## Tujuan
- Set up proyek Vercel dan environment variables.
- Opsi custom domain (jika ada).
- Aktifkan preview deployments.
- Verifikasi type-check, lint, dan build.

## Tindakan
1. Persiapan env contoh di root: tambah `.env.example` berisi variabel publik dan server-only agar konfigurasi di Vercel konsisten.
2. Vercel project setup (manual di dashboard):
   - Buat Project baru, hubungkan ke repo ini.
   - Framework: Next.js 16 (auto detect).
   - Build Command: `npm run build`, Output: `.next` (default).
   - Aktifkan Preview Deployments untuk setiap PR/commit ke non‑production branches.
3. Environment variables:
   - Public: `NEXT_PUBLIC_APP_URL`, `NEXT_PUBLIC_CONVEX_URL`, `NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY`.
   - Server: `CONVEX_DEPLOYMENT`, `CLERK_SECRET_KEY`, `RESEND_API_KEY`, `XENDIT_SECRET_KEY`.
   - AI Provider (OpenRouter + Gemini Flash 2.5): `OPENROUTER_API_KEY`, `AI_PROVIDER=openrouter`, `AI_MODEL=google/gemini-2.5-flash`, `AI_BASE_URL=https://openrouter.ai/api/v1`.
   - Isi nilai sesuai `knowledge-base/env.txt` untuk staging/production; jangan commit secrets.
4. Custom domains (opsional):
   - Tambahkan domain di Vercel → Domains, set primary untuk Production.
   - Konfigurasi DNS (A/AAAA/CNAME) sesuai panduan Vercel.
5. Verifikasi build lokal sebagai preflight deployment:
   - `npm run type-check` → OK.
   - `npm run lint` → OK dengan 4 warnings dari file auto-generated Convex.
   - `npm run build` → OK, route list tercetak, proxy aktif.

## Checklist
- [x] `.env.example` dibuat di root.
- [x] Rencana env Vercel terdokumentasi (public/server-only).
- [x] Preview deployments disiapkan (melalui konfigurasi Vercel dashboard).
- [x] Custom domain dicatat sebagai opsional, belum diterapkan.
- [x] Type-check, lint, build lulus lokal.

## Bukti
- Type-check: `tsc --noEmit` exit code 0.
- Lint: 0 errors, 4 warnings (unused eslint-disable di `convex/_generated/*`).
- Build: Next.js 16 berhasil compile; daftar route: `/`, `/protected`, `/sign-in`, `/sign-up`, `/sign-out`; Proxy (Middleware) aktif.

## Catatan
- Variabel env harus diisi di Vercel untuk setiap environment (Development/Preview/Production).
- Custom domains belum diterapkan; lanjut saat domain siap.
