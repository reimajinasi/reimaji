# 1.2 Implement User Role Management

## Tujuan
- Admin panel untuk melihat daftar user dan mengubah role.
- Alur upgrade role (Free → Pro) lewat aksi admin.
- Manajemen sesi mengandalkan Clerk (sign-in/sign-out, proxy proteksi).

## Langkah Implementasi
- Convex: tambah `users.updateRole` (RBAC `ensureRole` untuk `admin/superadmin`).
- Admin UI: `src/app/admin/users/page.tsx` menampilkan tabel user dan form update role menggunakan server actions + `fetchMutation`.
- Proteksi: akses daftar user via `api.users.listAll` yang memverifikasi role pemanggil.

## Verifikasi
- `npm run type-check` → OK
- `npm run lint` → OK
- `npm run build` → OK; route `/admin/users` terdeteksi.

## Bukti
- Build output menampilkan route: `/admin/users`.
- Perubahan role tersimpan ke `users` dengan `updatedAt` ter-update.

## Risiko & Mitigasi
- Pengguna non-admin mengakses halaman → diblok via proxy + RBAC di Convex.
- Tipe TS pada data Convex → gunakan `Doc<'users'>` dan `Id<'users'>` dari `dataModel`.

## Checklist
- [x] Query `users.listAll` hanya untuk admin/superadmin.
- [x] Mutation `users.updateRole` dengan RBAC.
- [x] UI admin untuk update role.
- [x] Verifikasi lint/type-check/build.
